(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{449:function(e,t,r){"use strict";r.r(t);r(44);var o={layout:"DashboardPage",name:"itemPost",data:function(){return{loading_Upload_state:!1,loading_Add_state:!1,files_message:"點擊或拖拉圖片至此上傳圖片",data:{category:"",image:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",origin_price:null,author:"",publisher:"",publish_date:"",language:"",price:null,title:"",event:"",is_enabled:0,description:"",book_content:""}}},methods:{upload_img:function(e){var t=this,r=this.$refs.files.files[0],o=new FormData;this.files_message=r.name,o.append("file-to-upload",r),this.loading_Upload_state=!0,this.$axios({url:"https://vue-course-api.hexschool.io/api/joechen/admin/upload",method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var data=e.data;t.data.image=data.imageUrl,t.loading_Upload_state=!1})},ADD_product:function(){var e=this,t=this.data;this.loading_Add_state=!0,this.$validator.validate().then(function(r){if(!r)return!1;e.$axios({method:"post",url:"https://vue-course-api.hexschool.io/api/joechen/admin/product",data:{data:t}}).then(function(t){e.loading_Add_state=!1,e.data={category:"",image:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",origin_price:null,event:"",author:"",publisher:"",publish_date:"",language:"",price:null,title:"",unit:"",is_enabled:0,description:"",book_content:""}})})}}},l=r(6),component=Object(l.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{on:{submit:function(t){return t.preventDefault(),e.ADD_product(t)}}},[r("h1",{staticClass:"my-2"},[e._v("商品上傳")]),e._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-4"},[r("label",{attrs:{for:"customFile"}},[e._v("上傳圖片")]),e._v(" "),r("div",{staticClass:"form-group post-files"},[r("input",{ref:"files",staticClass:"form-control ",attrs:{id:"customFile",type:"file"},on:{change:function(t){return e.upload_img("file")}}}),e._v(" "),r("p",[e._v(e._s(e.files_message))])]),e._v(" "),r("img",{staticClass:"img-fluid",attrs:{src:e.data.image,alt:""}}),e._v(" "),e.loading_Upload_state?r("Loading"):e._e()],1),e._v(" "),r("div",{staticClass:"col-sm-8"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"title"}},[e._v("標題")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.title,expression:"data.title",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("title")},attrs:{id:"title",type:"text",name:"title",placeholder:"請輸入標題"},domProps:{value:e.data.title},on:{input:function(t){t.target.composing||e.$set(e.data,"title",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("title"),expression:"errors.has('title')"}],staticClass:"text-danger"},[e._v("標題必須填寫")])]),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"category"}},[e._v("分類")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.category,expression:"data.category",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("category")},attrs:{type:"text",placeholder:"請輸入分類",name:"category"},domProps:{value:e.data.category},on:{input:function(t){t.target.composing||e.$set(e.data,"category",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("category"),expression:"errors.has('category')"}],staticClass:"text-danger"},[e._v("分類必須填寫")])]),e._v(" "),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"event"}},[e._v("現正活動")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.event,expression:"data.event",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"event"},domProps:{value:e.data.event},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.data,"event",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[e._v("請選擇當前活動")]),e._v(" "),r("option",{attrs:{value:"新刊書籍"}},[e._v("新刊書籍")]),e._v(" "),r("option",{attrs:{value:"熱門書籍"}},[e._v("熱門書籍")]),e._v(" "),r("option",{attrs:{value:"現正折價"}},[e._v("現正折價")])])])]),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"author"}},[e._v("作者")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.author,expression:"data.author",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("author")},attrs:{type:"text",placeholder:"請輸入作者",name:"author"},domProps:{value:e.data.author},on:{input:function(t){t.target.composing||e.$set(e.data,"author",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("author"),expression:"errors.has('author')"}],staticClass:"text-danger"},[e._v("作者必須填寫")])]),e._v(" "),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"language"}},[e._v("語言")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.language,expression:"data.language",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("language")},attrs:{id:"language",type:"language",placeholder:"請輸入語言",name:"language"},domProps:{value:e.data.language},on:{input:function(t){t.target.composing||e.$set(e.data,"language",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("language"),expression:"errors.has('language')"}],staticClass:"text-danger"},[e._v("語言必須填寫")])])]),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"publisher"}},[e._v("出版社")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.publisher,expression:"data.publisher",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("publisher")},attrs:{id:"publisher",type:"publisher",placeholder:"請輸入出版社",name:"publisher"},domProps:{value:e.data.publisher},on:{input:function(t){t.target.composing||e.$set(e.data,"publisher",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("publisher"),expression:"errors.has('publisher')"}],staticClass:"text-danger"},[e._v("出版社必須填寫")])]),e._v(" "),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"publish_date"}},[e._v("出版日期")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.publish_date,expression:"data.publish_date",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("publish_date")},attrs:{type:"text",placeholder:"2019/01/01",name:"publish_date"},domProps:{value:e.data.publish_date},on:{input:function(t){t.target.composing||e.$set(e.data,"publish_date",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("publish_date"),expression:"errors.has('publish_date')"}],staticClass:"text-danger"},[e._v("出版時間必須填寫")])])]),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"origin_price"}},[e._v("原價")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.origin_price,expression:"data.origin_price",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^([0-9]+)$/},expression:"{required: true, regex: /^([0-9]+)$/}"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("origin_price")},attrs:{id:"origin_price",type:"number",placeholder:"請輸入原價",name:"origin_price"},domProps:{value:e.data.origin_price},on:{input:function(t){t.target.composing||e.$set(e.data,"origin_price",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("origin_price"),expression:"errors.has('origin_price')"}],staticClass:"text-danger"},[e._v("原價必須填寫")])]),e._v(" "),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"price"}},[e._v("售價")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.price,expression:"data.price",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^([0-9]+)$/},expression:"{required: true, regex: /^([0-9]+)$/}"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("price")},attrs:{id:"price",type:"number",placeholder:"請輸入售價",name:"price"},domProps:{value:e.data.price},on:{input:function(t){t.target.composing||e.$set(e.data,"price",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("price"),expression:"errors.has('price')"}],staticClass:"text-danger"},[e._v("售價必須填寫")])])]),e._v(" "),r("hr"),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"description"}},[e._v("產品描述")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.description,expression:"data.description",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"description",type:"text",placeholder:"請輸入產品描述"},domProps:{value:e.data.description},on:{input:function(t){t.target.composing||e.$set(e.data,"description",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"book_content"}},[e._v("說明內容")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.book_content,expression:"data.book_content",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"book_content",type:"text",placeholder:"請輸入產品說明內容"},domProps:{value:e.data.book_content},on:{input:function(t){t.target.composing||e.$set(e.data,"book_content",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.data.is_enabled,expression:"data.is_enabled",modifiers:{trim:!0}}],staticClass:"form-check-input",attrs:{id:"is_enabled",type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.data.is_enabled)?e._i(e.data.is_enabled,null)>-1:e._q(e.data.is_enabled,1)},on:{change:function(t){var r=e.data.is_enabled,o=t.target,l=o.checked?1:0;if(Array.isArray(r)){var n=e._i(r,null);o.checked?n<0&&e.$set(e.data,"is_enabled",r.concat([null])):n>-1&&e.$set(e.data,"is_enabled",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.data,"is_enabled",l)}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[e._v("\n            是否啟用\n          ")])])])])]),e._v(" "),e._m(0),e._v(" "),e.loading_Add_state?r("Loading"):e._e()],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"d-flex justify-content-end"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("新增")])])}],!1,null,null,null);t.default=component.exports}}]);