(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{448:function(e,t,r){"use strict";r.r(t);r(193),r(55);var o={layout:"DashboardPage",name:"Itemspage",data:function(){return{ordershow:!1,select_order:{}}},computed:{orderList:function(){var e=this.$store.state.orders_list;return e.length>0&&e}},methods:{close:function(){this.ordershow=!this.ordershow},SHOW_order:function(e){var t=this;this.ordershow=!this.ordershow,this.select_order=Object.assign({},e);var r=[],o=function(e){var o,l=t.select_order.products[e],n=r.find(function(data){return l.product_id===data.product_id});n?(o=n,r.find(function(data){o.product_id===data.product_id&&data.qty++})):r.push(l)};for(var l in this.select_order.products)o(l);this.select_order.products=r},UPDATE_user:function(){var e=this;this.$validator.validate().then(function(t){if(t){var r={data:e.select_order};e.$store.dispatch("UPDATE_order",r).then(function(data){e.ordershow=!e.ordershow})}})}},filters:{date_format:function(e){if(e){var time=new Date(1e3*e),t=time.getFullYear(),r=time.getMonth()+1;r=("0"+r).substr(-2);var o=("0"+time.getDate()).substr(-2);return"".concat(t,"-").concat(r,"-").concat(o)}}},mounted:function(){this.$store.dispatch("GET_orderList")}},l=r(6),component=Object(l.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"my-2"},[e._v("訂單資訊")]),e._v(" "),r("div",{staticClass:"table-responsive-xl"},[r("table",{staticClass:"table table-hover"},[e._m(0),e._v(" "),r("tbody",e._l(e.orderList,function(t,o,l){return r("tr",{key:l},[r("th",{attrs:{scope:"row"}},[e._v(e._s(e._f("date_format")(t.create_at)))]),e._v(" "),r("td",[e._v(e._s(t.id))]),e._v(" "),r("td",[e._v(e._s(e._f("floorNum")(t.total)))]),e._v(" "),r("td",[r("button",{staticClass:"btn btn-outline-info",attrs:{type:"button"},on:{click:function(r){return e.SHOW_order(t)}}},[e._v("查看")])])])}),0)])]),e._v(" "),e.select_order.id?r("b-modal",{attrs:{title:"訂單編號: "+e.select_order.id,"hide-footer":""},model:{value:e.ordershow,callback:function(t){e.ordershow=t},expression:"ordershow"}},[r("b-col",{staticClass:"py-3 mb-md-0 mb-3  cart-billing-section",attrs:{cols:"12"}},[r("h4",{staticClass:"mb-3 text-center"},[e._v("訂購人資料")]),e._v(" "),r("form",{staticClass:"cart-billing-info"},[r("label",{staticClass:"mb-2 d-block",attrs:{for:"user-name"}},[e._v("訂購人姓名")]),e._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.select_order.user.name,expression:"select_order['user']['name']"}],staticClass:"mb-3",class:{"is-invalid":e.errors.has("name")},attrs:{type:"text",id:"user-name",name:"name"},domProps:{value:e.select_order.user.name},on:{input:function(t){t.target.composing||e.$set(e.select_order.user,"name",t.target.value)}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger"},[e._v("姓名必須填寫")]),e._v(" "),r("label",{staticClass:"mb-2 d-block",attrs:{for:"email"}},[e._v("Email")]),e._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:e.select_order.user.email,expression:"select_order['user']['email']"}],staticClass:"mb-3",class:{"is-invalid":e.errors.has("email")},attrs:{type:"email",id:"user-email",name:"email"},domProps:{value:e.select_order.user.email},on:{input:function(t){t.target.composing||e.$set(e.select_order.user,"email",t.target.value)}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger"},[e._v(e._s(e.errors.first("email")))]),e._v(" "),r("label",{staticClass:"mb-2 d-block",attrs:{for:"user-phone"}},[e._v("訂購人電話")]),e._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.select_order.user.tel,expression:"select_order['user']['tel']"}],staticClass:"mb-3",class:{"is-invalid":e.errors.has("phone")},attrs:{type:"phone",id:"user-name",name:"phone"},domProps:{value:e.select_order.user.tel},on:{input:function(t){t.target.composing||e.$set(e.select_order.user,"tel",t.target.value)}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("phone"),expression:"errors.has('phone')"}],staticClass:"text-danger"},[e._v("電話必須填寫")]),e._v(" "),r("label",{staticClass:"mb-2 d-block",attrs:{for:"user-address"}},[e._v("訂購人地址")]),e._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:e.select_order.user.address,expression:"select_order['user']['address']"}],staticClass:"mb-3",class:{"is-invalid":e.errors.has("address")},attrs:{type:"text",id:"user-name",name:"address"},domProps:{value:e.select_order.user.address},on:{input:function(t){t.target.composing||e.$set(e.select_order.user,"address",t.target.value)}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("address"),expression:"errors.has('address')"}],staticClass:"text-danger"},[e._v("地址必須填寫")]),e._v(" "),r("label",{staticClass:"mb-2 d-block",attrs:{for:""}},[e._v("取貨方式")]),e._v(" "),r("div",{staticClass:"cart-billing-select"},[r("select",{directives:[{name:"validate",rawName:"v-validate",value:"included:buk-pack,buk-Ipack,buk-Upack,超商貨到付款,全球宅配",expression:"'included:buk-pack,buk-Ipack,buk-Upack,超商貨到付款,全球宅配'"},{name:"model",rawName:"v-model",value:e.select_order.user.paymethod,expression:"select_order['user']['paymethod']"}],staticClass:"mb-3 d-block",attrs:{id:"",name:"paymethod"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.select_order.user,"paymethod",t.target.multiple?r:r[0])}}},[r("option",{attrs:{selected:"true",disabled:"disabled"}},[e._v("--- 請選擇取貨方式 ---")]),e._v(" "),r("option",{attrs:{value:"buk-pack"}},[e._v("buk-pack")]),e._v(" "),r("option",{attrs:{value:"buk-Ipack"}},[e._v("buk-Ipack")]),e._v(" "),r("option",{attrs:{value:"buk-Upack"}},[e._v("buk-Upack")]),e._v(" "),r("option",{attrs:{value:"超商貨到付款"}},[e._v("超商貨到付款")]),e._v(" "),r("option",{attrs:{value:"全球宅配"}},[e._v("全球宅配")])])]),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("paymethod"),expression:"errors.has('paymethod')"}],staticClass:"text-danger"},[e._v("請選擇配送方式")])])]),e._v(" "),r("b-col",{staticClass:"cart-itemlist",attrs:{cols:"12"}},[r("h2",{staticClass:"py-3 text-center cart-msg-title h4"},[e._v("商品清單")]),e._v(" "),e._l(e.select_order.products,function(t){return r("section",{key:t.id,staticClass:"cart-items"},[r("b-col",{attrs:{lg:"3",cols:"6"}},[e._t("item-img",[r("img",{staticClass:"img-fluid",attrs:{src:t.product.image,alt:t.product.title}})])],2),e._v(" "),r("b-col",{staticClass:"p-lg-0 px-3 d-flex-justify-align-all-center",attrs:{lg:"5",cols:"6"}},[r("section",{staticClass:"m-0 w-100 cart-items-info "},[r("span",{staticClass:"h5 mb-0 mr-1"},[e._v(e._s(t.product.title))]),r("br"),e._v(" "),r("span",[e._v(" NT$ "+e._s(t.product.price)+" x "+e._s(t.qty))])])]),e._v(" "),r("b-col",{staticClass:"mt-lg-0 mt-2 d-flex-justify-align-all-center carts-item-total",attrs:{lg:"4",cols:"12"}},[r("span",{staticClass:"mr-2"},[e._v("NT$ "+e._s(t.product.price*t.qty)+" ")])])],1)}),e._v(" "),r("div",{staticClass:"px-2 d-flex justify-content-between"},[r("span",{staticClass:"h5"},[e._v("總計")]),e._v(" "),r("span",{staticClass:"h5"},[e._v("NT$ "+e._s(e._f("floorNum")(e.select_order.total)))])])],2),e._v(" "),r("div",{staticClass:"d-flex justify-content-end"},[r("button",{staticClass:"btn btn-secondary mt-3 mr-3",attrs:{type:"button"},on:{click:e.close}},[e._v("關閉")]),e._v(" "),r("button",{staticClass:"btn btn-info mt-3",attrs:{type:"button"},on:{click:e.UPDATE_user}},[e._v("修改")])])],1):e._e()],1)},[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("訂單日期")]),this._v(" "),t("th",[this._v("訂單編號")]),this._v(" "),t("th",[this._v("總價")]),this._v(" "),t("th",[this._v("訂單資訊")])])])}],!1,null,null,null);t.default=component.exports}}]);