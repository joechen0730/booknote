(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{398:function(t,o,e){t.exports=e.p+"img/893f6e1.jpg"},399:function(t,o,e){t.exports=e.p+"img/6636dd0.jpg"},439:function(t,o,e){"use strict";e.r(o);e(78);var r=e(17),n=(e(193),e(397)),l=e(74);e.n(l).a.defaults.withCredentials=!0;var c={layout:"InnerPage",scrollToTop:!0,data:function(){return{items:[{text:"booknote",to:"/"},{text:"",href:"#"},{text:"",active:!0}],gildeSelector:null,historyItems:[],dots_active:0,ADD_to_carts_status:!1}},methods:{Change_breadcrumb:function(title){this.items[2].text=title},ADD_Cart:function(t){var o=this;this.ADD_to_carts_status=!0;var e={product_id:this.findBook.id,qty:1};this.$axios({method:"post",url:"https://vue-course-api.hexschool.io/api/joechen/cart",data:{data:e}}).then(function(e){o.ADD_to_carts_status=!1,o.$bus.$emit("message:push","成功加入購物車","success"),o.$store.dispatch("GET_Cart"),o.$store.dispatch("GA_ADD_TO_CART",o.findBook),t&&o.$router.push({name:"cart"})})},GET_localstorage:function(t){var o=JSON.parse(localStorage.getItem("historyBooks"));o&&(this.historyItems=o)},onSlideStart:function(t){this.sliding=!0},onSlideEnd:function(t){this.sliding=!1},onGlide:function(t){var o=this;setTimeout(function(){o.$nextTick(function(){new n.a(t,{perView:3,startAt:0,draggable:!0,type:"slider",focusAt:"center",animationDuration:500,breakpoints:{992:{perView:2},450:{perView:1}}}).mount()})},100)},SET_localstorage:function(){var t={id:this.findBook.id,title:this.findBook.title,image:this.findBook.image,category:this.findBook.category};this.historyItems.some(function(o){return o.title===t.title})||(this.historyItems.length>=5&&this.historyItems.splice(0,1),this.historyItems.push(t)),localStorage.setItem("historyBooks",JSON.stringify(this.historyItems))}},computed:{findBook:function(){var t=this,o=this.$route.params.bookid,e=this.$store.state.books_list;return e.length>1&&e.find(function(e){if(e.id===o)return t.Change_breadcrumb(e.title),t.$store.dispatch("GA_view_items",e),e})}},beforeRouteLeave:function(t,o,e){this.SET_localstorage(),e()},beforeRouteUpdate:function(t,o,e){var n=this;(function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.GET_localstorage();case 3:return t.next=5,n.SET_localstorage();case 5:t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",t.t0);case 10:case"end":return t.stop()}},t,null,[[0,7]])}));return function(){return t.apply(this,arguments)}})()().then(function(){document.documentElement.scrollTop=0,e()})},watch:{gildeSelector:function(t){var o=!1;t&&this.historyItems.length>0&&!o&&(this.gildeSelector=t,this.onGlide(this.gildeSelector),o=!0)}},updated:function(){var t=this;this.$nextTick(function(){t.gildeSelector=t.$refs.glideHistory,t.items[1].text=t.$route.params.bookspage,t.items[1].href="/"+t.$route.params.bookspage})},mounted:function(){this.GET_localstorage(),this.items[1].text=this.$route.params.bookspage,this.items[1].href="/"+this.$route.params.bookspage}},d=e(6),component=Object(d.a)(c,function(){var t=this,o=t.$createElement,r=t._self._c||o;return t.findBook?r("div",[r("Alert"),t._v(" "),r("div",{staticClass:"subtitle mt-0"},[r("h2",{staticClass:"inner-title mb-0"},[t._v(t._s(t.findBook.title))]),t._v(" "),[r("b-breadcrumb",{staticClass:"mb-0",attrs:{items:t.items}})]],2),t._v(" "),r("section",{staticClass:"book-detail"},[r("div",{staticClass:"book-content-col-2 book-img"},[r("img",{attrs:{src:t.findBook.image,alt:t.findBook.title}})]),t._v(" "),r("div",{staticClass:"book-content-col-2 book-info"},[r("div",{staticClass:"books-single-col-info text-left"},[r("div",{staticClass:"book-author my-5p"},[t._v("\n          "+t._s(t.$t("__booklist_info_author"))+"："+t._s(t.findBook.author)+"\n          ")]),t._v(" "),r("div",{staticClass:"my-5p"},[t._v("\n          "+t._s(t.$t("__booklist_info_publisher"))+"："+t._s(t.findBook.publisher)+"\n          ")]),t._v(" "),r("div",{staticClass:"my-5p"},[t._v("\n          "+t._s(t.$t("__booklist_info_publisher_date"))+"："+t._s(t.findBook.publish_date)+"\n          ")]),t._v(" "),r("div",{staticClass:"my-5p"},[t._v("\n          "+t._s(t.$t("__booklist_info_language"))+"："+t._s(t.findBook.language)+"\n          ")]),t._v(" "),r("div",{staticClass:"book-price my-5p"},[r("p",{staticClass:"book-origin-price book-has-discount my-5p"},[t._v(" "+t._s(t.$t("__booklist_info_price"))+"："+t._s(t.findBook.origin_price)+" 元")]),t._v(" "),r("p",{staticClass:"book-discount-price my-5p"},[t._v(t._s(t.$t("__booklist_info_discountPrice"))+"："+t._s(t.findBook.price)+" 元")])]),t._v(" "),r("div",{staticClass:"book-delivery my-5p"},[r("p",{staticClass:"my-5p"},[t._v("運送方式：")]),t._v(" "),r("b-tabs",[r("b-tab",{staticClass:"p-0",attrs:{title:"臺灣與離島",active:""}},[r("p",{staticClass:"my-5p"},[r("img",{staticClass:"mr-1 delivery-icon",attrs:{src:e(398),alt:"delivery-icon"}}),t._v("可配送點：台灣、蘭嶼、綠島、澎湖、金門、馬祖\n              ")]),t._v(" "),r("p",{staticClass:"my-5p"},[r("img",{staticClass:"mr-1 delivery-icon",attrs:{src:e(399),alt:"711"}}),t._v("可取貨點：台灣、蘭嶼、綠島、澎湖、金門、馬祖\n              ")])]),t._v(" "),r("b-tab",{staticClass:"p-0",attrs:{title:"海外"}},[r("p",{staticClass:"my-5p"},[r("img",{staticClass:"mr-1 delivery-icon",attrs:{src:e(398),alt:"Logo brand"}}),t._v("可配送點：海外皆可以宅配\n              ")]),t._v(" "),r("p",{staticClass:"my-5p"},[r("img",{staticClass:"mr-1 delivery-icon",attrs:{src:e(399),alt:"Logo brand"}}),t._v("可取貨點：香港、澳門\n              ")])])],1)],1),t._v(" "),r("button",{staticClass:"btn border-0 btn-cart mt-2",on:{click:function(o){return t.ADD_Cart()}}},[t._v("\n          加入購物車\n        ")]),t._v(" "),r("button",{staticClass:"btn border-0 btn-cart mt-2",on:{click:function(o){return t.ADD_Cart("buy")}}},[t._v("\n          直接購買\n        ")]),t._v(" "),t.ADD_to_carts_status?r("Loading"):t._e()],1)])]),t._v(" "),r("article",{staticClass:"book-summary book-detail"},[r("h3",[t._v("書本簡介")]),t._v(" "),r("div",{domProps:{innerHTML:t._s(t.findBook.book_content)}})]),t._v(" "),r("section",{staticClass:"book-summary"},[r("h3",[t._v("曾經瀏覽過的書本")]),t._v(" "),r("div",{ref:"glideHistory",staticClass:"glide glide-history",attrs:{id:"glide"}},[r("div",{staticClass:"glide__track",attrs:{"data-glide-el":"track"}},[r("ul",{staticClass:"glide__slides"},t._l(t.historyItems,function(o){return r("li",{key:o.title+"slide",staticClass:"books-item glide__slide"},[r("router-link",{staticClass:"frame",attrs:{to:{name:"bookspage-bookid-bookid",params:{bookspage:""+o.category,bookid:""+o.id}}}},[r("div",[r("img",{attrs:{src:o.image,alt:o.title}})])]),t._v(" "),r("p",{staticClass:"text-center mt-2 books-item-name"},[t._v(t._s(o.title))])],1)}),0),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.historyItems.length<1,expression:"historyItems.length < 1"}],staticClass:"glide-history-hint"},[r("h5",[t._v("尚無瀏覽紀錄")])])]),t._v(" "),r("div",{staticClass:"dots-bullet",attrs:{"data-glide-el":"controls"}},[r("button",{staticClass:"glide_arrows",attrs:{"data-glide-dir":"<"}},[r("fa",{staticClass:"glide__arrow_prev",attrs:{icon:["fas","location-arrow"]}})],1),t._v(" "),r("div",{staticClass:"glide-bulet_dots",attrs:{"data-glide-el":"controls[nav]"}}),t._v(" "),r("button",{staticClass:"glide_arrows ",attrs:{"data-glide-dir":">"}},[r("fa",{staticClass:"glide__arrow_next",attrs:{icon:["fas","location-arrow"]}})],1)])])])],1):t._e()},[],!1,null,null,null);o.default=component.exports}}]);