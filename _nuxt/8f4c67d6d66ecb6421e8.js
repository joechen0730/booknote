(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{447:function(e,t,r){"use strict";r.r(t);r(44),r(55);var o={layout:"DashboardPage",name:"DashItems",data:function(){return{modalShow:!1,deleteShow:!1,files_message:"點擊或拖拉圖片至此上傳圖片",selectItem:{},loading_delete_state:!1,loading_Upload_state:!1,loading_UPDATE_state:!1}},methods:{open_modal:function(e){this.modalShow=!0,this.selectItem=Object.assign({},e)},close_modal:function(){this.selectItem={},this.modalShow=!1,this.deleteShow=!1},chage_Item:function(e){var t=e;this.selectItem[t]=event.target.value},delete_item:function(e,t){this.deleteShow=!0,this.selectItem=e,this.selectItem.order=t},delete_product:function(e){var t=this;this.loading_delete_state=!0,this.$axios({method:"DELETE",url:"https://vue-course-api.hexschool.io/api/joechen/admin/product/"+e}).then(function(r){r.data;delete t.$store.state.dashboard_books_list[e],t.deleteShow=!1,t.loading_delete_state=!1})},upload_img:function(e){var t=this,r=this.$refs.files.files[0],o=new FormData;this.files_message=r.name,o.append("file-to-upload",r),this.loading_Upload_state=!0,this.$axios({url:"https://vue-course-api.hexschool.io/api/joechen/admin/upload",method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var data=e.data;t.selectItem.image=data.imageUrl,t.loading_Upload_state=!1})},UPDATE_product:function(){var e=this;this.loading_UPDATE_state=!0;var t=this.selectItem.id,r={data:this.selectItem};this.$axios({url:"https://vue-course-api.hexschool.io/api/joechen/admin/product/"+t,method:"put",data:r}).then(function(t){e.selectItem={},e.loading_UPDATE_state=!1,e.$store.dispatch("GET_dashboard_books_all"),e.modalShow=!1})}},computed:{DashItems:function(){var e=this.$store.state.dashboard_books_list;return e||!1}},mounted:function(){this.$store.dispatch("GET_dashboard_books_all")}},l=r(6),component=Object(l.a)(o,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"my-2"},[e._v("商品列表")]),e._v(" "),r("div",{staticClass:"table-responsive-xl"},[r("table",{staticClass:"table table-hover"},[e._m(0),e._v(" "),r("tbody",e._l(e.DashItems,function(t,o,l){return r("tr",{key:t.title},[r("th",{attrs:{scope:"row"}},[e._v(e._s(t.category))]),e._v(" "),r("td",[e._v(e._s(t.title))]),e._v(" "),r("td",[e._v(e._s(t.origin_price))]),e._v(" "),r("td",[e._v(e._s(t.price))]),e._v(" "),r("td",[e._v(e._s(t.is_enabled?"啟用":"未啟用"))]),e._v(" "),r("td",[r("button",{staticClass:"btn btn-outline-info",attrs:{type:"button"},on:{click:function(r){return e.open_modal(t)}}},[e._v(" 編輯\n            ")])]),e._v(" "),r("td",[r("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(r){return e.delete_item(t,l)}}},[e._v(" 刪除\n            ")])])])}),0)]),e._v(" "),r("b-modal",{attrs:{title:e.selectItem.title,"hide-footer":""},model:{value:e.modalShow,callback:function(t){e.modalShow="string"==typeof t?t.trim():t},expression:"modalShow"}},[r("img",{staticClass:"img-fluid",attrs:{src:e.selectItem.image,alt:e.selectItem.title}}),e._v(" "),r("form",[r("p",{staticClass:"my-2"},[e._v("商品編號 : "+e._s(e.selectItem.id))]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"customFile"}},[e._v("\n            修改圖片\n          ")]),e._v(" "),r("div",{staticClass:"form-group post-files"},[r("input",{ref:"files",staticClass:"form-control ",attrs:{id:"customFile",type:"file"},on:{change:function(t){return e.upload_img("file")}}}),e._v(" "),r("p",[e._v(e._s(e.files_message))])])]),e._v(" "),e.loading_Upload_state?r("Loading"):e._e(),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"title"}},[e._v("標題")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.title,expression:"selectItem.title",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("title")},attrs:{id:"title",type:"text",name:"title",placeholder:"請輸入標題"},domProps:{value:e.selectItem.title},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"title",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("title"),expression:"errors.has('title')"}],staticClass:"text-danger"},[e._v("標題必須填寫")])]),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-12"},[r("label",{attrs:{for:"category"}},[e._v("分類")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.category,expression:"selectItem.category",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("category")},attrs:{type:"text",placeholder:"請輸入分類",name:"category"},domProps:{value:e.selectItem.category},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"category",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("category"),expression:"errors.has('category')"}],staticClass:"text-danger"},[e._v("分類必須填寫")])]),e._v(" "),r("div",{staticClass:"form-group col-12"},[r("label",{attrs:{for:"event"}},[e._v("現正活動")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.event,expression:"selectItem.event",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"event"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.selectItem,"event",t.target.multiple?r:r[0])}}},[r("option",{attrs:{value:""}},[e._v("請選擇當前活動")]),e._v(" "),r("option",{attrs:{value:"新刊書籍"}},[e._v("新刊書籍")]),e._v(" "),r("option",{attrs:{value:"熱門書籍"}},[e._v("熱門書籍")]),e._v(" "),r("option",{attrs:{value:"現正折價"}},[e._v("現正折價")])])])]),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"author"}},[e._v("作者")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.author,expression:"selectItem.author",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("author")},attrs:{type:"text",placeholder:"請輸入作者",name:"author"},domProps:{value:e.selectItem.author},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"author",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("author"),expression:"errors.has('author')"}],staticClass:"text-danger"},[e._v("作者必須填寫")])]),e._v(" "),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"language"}},[e._v("語言")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.language,expression:"selectItem.language",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("language")},attrs:{id:"language",type:"language",placeholder:"請輸入語言",name:"language"},domProps:{value:e.selectItem.language},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"language",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("language"),expression:"errors.has('language')"}],staticClass:"text-danger"},[e._v("語言必須填寫")])])]),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-12"},[r("label",{attrs:{for:"publisher"}},[e._v("出版社")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.publisher,expression:"selectItem.publisher",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("publisher")},attrs:{id:"publisher",type:"publisher",placeholder:"請輸入出版社",name:"publisher"},domProps:{value:e.selectItem.publisher},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"publisher",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("publisher"),expression:"errors.has('publisher')"}],staticClass:"text-danger"},[e._v("出版社必須填寫")])]),e._v(" "),r("div",{staticClass:"form-group col-12"},[r("label",{attrs:{for:"publish_date"}},[e._v("出版日期")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.publish_date,expression:"selectItem.publish_date",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("publish_date")},attrs:{type:"text",placeholder:"2019/01/01",name:"publish_date"},domProps:{value:e.selectItem.publish_date},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"publish_date",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("publish_date"),expression:"errors.has('publish_date')"}],staticClass:"text-danger"},[e._v("出版時間必須填寫")])])]),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-12"},[r("label",{attrs:{for:"origin_price"}},[e._v("原價")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.origin_price,expression:"selectItem.origin_price",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^([0-9]+)$/},expression:"{required: true, regex: /^([0-9]+)$/}"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("origin_price")},attrs:{id:"origin_price",type:"number",placeholder:"請輸入原價",name:"origin_price"},domProps:{value:e.selectItem.origin_price},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"origin_price",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("origin_price"),expression:"errors.has('origin_price')"}],staticClass:"text-danger"},[e._v("原價必須填寫")])]),e._v(" "),r("div",{staticClass:"form-group col-12"},[r("label",{attrs:{for:"price"}},[e._v("售價")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.price,expression:"selectItem.price",modifiers:{trim:!0}},{name:"validate",rawName:"v-validate",value:{required:!0,regex:/^([0-9]+)$/},expression:"{required: true, regex: /^([0-9]+)$/}"}],staticClass:"form-control",class:{"is-invalid":e.errors.has("price")},attrs:{id:"price",type:"number",placeholder:"請輸入售價",name:"price"},domProps:{value:e.selectItem.price},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"price",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:e.errors.has("price"),expression:"errors.has('price')"}],staticClass:"text-danger"},[e._v("售價必須填寫")])])]),e._v(" "),r("hr"),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"description"}},[e._v("產品描述")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.description,expression:"selectItem.description",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"description",type:"text",placeholder:"請輸入產品描述"},domProps:{value:e.selectItem.description},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"description",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"book_content"}},[e._v("說明內容")]),e._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.book_content,expression:"selectItem.book_content",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:"book_content",type:"text",placeholder:"請輸入產品說明內容"},domProps:{value:e.selectItem.book_content},on:{input:function(t){t.target.composing||e.$set(e.selectItem,"book_content",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e._v(" "),r("div",{staticClass:"form-group"},[r("div",{staticClass:"form-check"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.selectItem.is_enabled,expression:"selectItem.is_enabled",modifiers:{trim:!0}}],staticClass:"form-check-input",attrs:{id:"is_enabled",type:"checkbox","true-value":1,"false-value":0},domProps:{checked:Array.isArray(e.selectItem.is_enabled)?e._i(e.selectItem.is_enabled,null)>-1:e._q(e.selectItem.is_enabled,1)},on:{change:function(t){var r=e.selectItem.is_enabled,o=t.target,l=o.checked?1:0;if(Array.isArray(r)){var n=e._i(r,null);o.checked?n<0&&e.$set(e.selectItem,"is_enabled",r.concat([null])):n>-1&&e.$set(e.selectItem,"is_enabled",r.slice(0,n).concat(r.slice(n+1)))}else e.$set(e.selectItem,"is_enabled",l)}}}),e._v(" "),r("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[e._v("\n              是否啟用\n            ")])])]),e._v(" "),r("div",{staticClass:"d-flex justify-content-end mb-3"},[r("button",{staticClass:"mx-2 btn btn-outline-danger",attrs:{size:"sm",variant:"danger",type:"button"},on:{click:function(t){return e.close_modal()}}},[e._v(" 取消\n          ")]),e._v(" "),r("button",{staticClass:"btn btn-outline-info",attrs:{type:"button"},on:{click:e.UPDATE_product}},[e._v(" 確認修改")])]),e._v(" "),e.loading_UPDATE_state?r("Loading"):e._e()],1)]),e._v(" "),r("b-modal",{attrs:{title:e.selectItem.title,"hide-footer":""},model:{value:e.deleteShow,callback:function(t){e.deleteShow="string"==typeof t?t.trim():t},expression:"deleteShow"}},[r("img",{staticClass:"img-fluid",attrs:{src:e.selectItem.image,alt:e.selectItem.title}}),e._v(" "),e.loading_delete_state?r("Loading"):e._e(),e._v(" "),r("div",{staticClass:"d-flex justify-content-end my-5"},[r("b-button",{staticClass:"mx-2",attrs:{size:"md",variant:"danger"},on:{click:function(t){return e.close_modal()}}},[e._v(" 取消\n        ")]),e._v(" "),r("b-button",{staticClass:"mx-2",attrs:{size:"md",variant:"success"},on:{click:function(t){return e.delete_product(e.selectItem.id)}}},[e._v(" 確認刪除\n        ")])],1)],1)],1)])},[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",[e._v("分類")]),e._v(" "),r("th",[e._v("商品名稱")]),e._v(" "),r("th",[e._v("原價")]),e._v(" "),r("th",[e._v("售價")]),e._v(" "),r("th",[e._v("啟用")]),e._v(" "),r("th",[e._v("編輯")]),e._v(" "),r("th",[e._v("刪除")])])])}],!1,null,null,null);t.default=component.exports}}]);