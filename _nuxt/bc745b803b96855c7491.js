(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{430:function(t,e,o){"use strict";o.r(e);var n={layout:"CartPage",name:"cartpage",data:function(){return{loading_state:!0,Coupon:"",Use_Coupon:""}},components:{ItemComponent:function(){return o.e(25).then(o.bind(null,445))},CartsStep:function(){return o.e(3).then(o.bind(null,446))}},computed:{cart_items:function(){var t=this.$store.state.carts_list;return t?(this.closeLoading(),t):null}},methods:{delete_method:function(t){var e=this;this.$store.dispatch("Delete_Cart",t).then(function(t){e.loading_state=!0})},closeLoading:function(){this.loading_state=!1},Check_coupon:function(){var t=this,e={data:{code:this.Coupon}};this.$axios({method:"post",url:"https://vue-course-api.hexschool.io/api/joechen/coupon",data:e}).then(function(e){var data=e.data;if(data.success){t.Use_Coupon=t.Coupon,t.$bus.$emit("message:push","成功使用優惠卷","success");var o=data.data.final_total;t.$store.commit("SET_discount",o)}else t.$bus.$emit("message:push","找不到優惠卷")})},CHECKOUT_Cart:function(){var t={items:this.cart_items.carts,coupon:this.Use_Coupon};this.$store.dispatch("GA_begin_checkout",t),this.$router.push({name:"cart-checkout"})}}},c=o(6),component=Object(c.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"carts cart-page"},[o("Alert"),t._v(" "),o("CartsStep",[o("template",{slot:"carts-title"},[t._v(t._s(t.$t("__carts_step1_title")))])],2),t._v(" "),o("b-container",[o("b-row",[o("b-col",{attrs:{md:"8",cols:"12"}},[t.cart_items.carts.length<1?o("div",{staticClass:"text-center"},[o("p",[t._v(t._s(t.$t("__carts_no_items")))])]):t._e(),t._v(" "),o("Loading",{directives:[{name:"show",rawName:"v-show",value:t.loading_state,expression:"loading_state"}]}),t._v(" "),t._l(t.cart_items.carts,function(e,n){return o("ItemComponent",{key:e.id,attrs:{product_item:e,product_id:n},on:{delete_item:t.delete_method}},[o("img",{staticClass:"img-fluid",attrs:{slot:"item-img",src:e.product.image,alt:e.product.title},slot:"item-img"}),t._v(" "),o("template",{slot:"item-title"},[t._v(" "+t._s(e.product.title)+" ")]),t._v(" "),o("template",{slot:"item-price"},[t._v(" "+t._s(e.product.price))]),t._v(" "),o("template",{slot:"item-total-price"},[t._v(" "+t._s(e.product.price*e.qty))])],2)})],2),t._v(" "),o("b-col",{staticClass:"mb-4",attrs:{md:"4",cols:"12"}},[o("div",{staticClass:"p-3 cart-msg-box"},[o("h2",{staticClass:"py-3 text-center cart-msg-title h4"},[t._v(t._s(t.$t("__carts_step1_summary")))]),t._v(" "),o("hr",{staticClass:"border-white mt-0"}),t._v(" "),o("div",{staticClass:"input-group mb-3"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.Coupon,expression:"Coupon"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Coupon code"},domProps:{value:t.Coupon},on:{input:function(e){e.target.composing||(t.Coupon=e.target.value)}}}),t._v(" "),o("div",{staticClass:"input-group-append"},[o("button",{staticClass:"btn btn-coupon",attrs:{type:"button"},on:{click:t.Check_coupon}},[t._v(t._s(t.$t("__carts_step1_check_coupon")))])])]),t._v(" "),o("div",{staticClass:"mb-2 d-flex justify-content-between"},[o("span",[t._v(t._s(t.$t("__carts_total")))]),t._v(" "),o("span",[t._v("NT$ "+t._s(t.cart_items.total))])]),t._v(" "),o("div",{staticClass:"mb-2 d-flex justify-content-between"},[o("span",[t._v(t._s(t.$t("__carts_freight")))]),t._v(" "),o("span",[t._v("NT$ 100")])]),t._v(" "),o("div",{staticClass:"mb-2 d-flex justify-content-between"},[o("span",{staticClass:"h5"},[t._v(t._s(t.$t("__carts_final_total")))]),t._v(" "),o("span",{staticClass:"h5"},[t._v("NT$ "+t._s(t.cart_items.total+100))])]),t._v(" "),t.cart_items.total>t.cart_items.final_total?o("div",{staticClass:"d-flex justify-content-between"},[o("span",{staticClass:"h5"},[t._v(t._s(t.$t("__carts_coupon_price")))]),t._v(" "),o("span",{staticClass:"h5"},[t._v("NT$ "+t._s(t._f("floorNum")(t.cart_items.final_total))+" ")])]):t._e()]),t._v(" "),o("div",{staticClass:"mx-md-0"},[o("a",{staticClass:"py-3 btn btn-block btn-lg rounded-0 btn-checkout",on:{click:function(e){return e.preventDefault(),t.CHECKOUT_Cart(e)}}},[t._v(" "+t._s(t.$t("__carts_bill_info_checkout"))+"\n          ")])])])],1)],1)],1)},[],!1,null,null,null);e.default=component.exports}}]);