(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{391:function(t,e,r){var content=r(405);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(22).default)("9ceda46c",content,!0,{sourceMap:!1})},404:function(t,e,r){"use strict";var l=r(391);r.n(l).a},405:function(t,e,r){(t.exports=r(21)(!1)).push([t.i,".is-invalid[data-v-229ebdb9]{border-color:#dc3545}",""])},433:function(t,e,r){"use strict";r.r(e);var l={layout:"CartPage",data:function(){return{user:{name:"",email:"",tel:"",address:"",paymethod:"--- 請選擇取貨方式 ---"}}},methods:{createOrder:function(){var t=this;this.$validator.validate().then(function(e){if(e){var r={data:{user:t.user,message:"這是留言"}};t.cart_items.carts.length>1?t.Checkout_Cart(r):alert("購物車無任何商品，無法結帳")}})},Checkout_Cart:function(t){var e=this,r={transaction_id:null,affiliation:"booknote",currency:"TWD",value:null,shipping:100,items:this.cart_items.carts};this.$axios({method:"POST",url:"https://vue-course-api.hexschool.io/api/joechen/order",data:t}).then(function(t){var data=t.data;r.transaction_id=data.orderId,r.value=data.total,e.$axios({method:"POST",url:"https://vue-course-api.hexschool.io/api/joechen/pay/"+data.orderId}).then(function(t){e.$store.dispatch("GA_purchase",r),e.$router.push({name:"cart-checkout-success-success",params:{success:data.orderId}})})})}},computed:{cart_items:function(){var t=this.$store.state.carts_list;return t.carts.length>0&&t}},components:{CartsStep:function(){return r.e(3).then(r.bind(null,446))}}},n=(r(404),r(6)),component=Object(n.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"carts checkout-page mb-4 "},[r("b-container",[r("CartsStep",[r("template",{slot:"carts-title"},[t._v(t._s(t.$t("__carts_step1_title")))])],2),t._v(" "),r("b-row",[r("b-col",{staticClass:"py-3 mb-md-0 mb-3  cart-billing-section",attrs:{md:"8",cols:"12"}},[r("h4",{staticClass:"mb-3 text-center"},[t._v(t._s(t.$t("__carts_bill_info_title")))]),t._v(" "),r("form",{staticClass:"cart-billing-info",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[r("label",{staticClass:"mb-2 d-block",attrs:{for:"user-name"}},[t._v(t._s(t.$t("__carts_bill_info_name")))]),t._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"mb-3",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",id:"user-name",name:"name"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("name"),expression:"errors.has('name')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("__carts_bill_info_name_hint")))]),t._v(" "),r("label",{staticClass:"mb-2 d-block",attrs:{for:"email"}},[t._v("Email")]),t._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"},{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"mb-3",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",id:"user-email",name:"email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("email"),expression:"errors.has('email')"}],staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]),t._v(" "),r("label",{staticClass:"mb-2 d-block",attrs:{for:"user-phone"}},[t._v(t._s(t.$t("__carts_bill_info_phone")))]),t._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.user.tel,expression:"user.tel"}],staticClass:"mb-3",class:{"is-invalid":t.errors.has("phone")},attrs:{type:"phone",id:"user-name",name:"phone"},domProps:{value:t.user.tel},on:{input:function(e){e.target.composing||t.$set(t.user,"tel",e.target.value)}}}),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("phone"),expression:"errors.has('phone')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("__carts_bill_info_phone_hint")))]),t._v(" "),r("label",{staticClass:"mb-2 d-block",attrs:{for:"user-address"}},[t._v(t._s(t.$t("__carts_bill_info_address")))]),t._v(" "),r("input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"model",rawName:"v-model",value:t.user.address,expression:"user.address"}],staticClass:"mb-3",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",id:"user-name",name:"address"},domProps:{value:t.user.address},on:{input:function(e){e.target.composing||t.$set(t.user,"address",e.target.value)}}}),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("address"),expression:"errors.has('address')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("__carts_bill_info_address_hint")))]),t._v(" "),r("label",{staticClass:"mb-2 d-block",attrs:{for:""}},[t._v(t._s(t.$t("__carts_bill_info_Pickup")))]),t._v(" "),r("div",{staticClass:"cart-billing-select"},[r("select",{directives:[{name:"validate",rawName:"v-validate",value:"included:buk-pack,buk-Ipack,buk-Upack,超商貨到付款,全球宅配",expression:"'included:buk-pack,buk-Ipack,buk-Upack,超商貨到付款,全球宅配'"},{name:"model",rawName:"v-model",value:t.user.paymethod,expression:"user.paymethod"}],staticClass:"mb-3 d-block",attrs:{id:"",name:"paymethod"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.user,"paymethod",e.target.multiple?r:r[0])}}},[r("option",{attrs:{selected:"true",disabled:"disabled"}},[t._v(t._s(t.$t("__carts_bill_info_Pickup_choice")))]),t._v(" "),r("option",{attrs:{value:"buk-pack"}},[t._v("buk-pack")]),t._v(" "),r("option",{attrs:{value:"buk-Ipack"}},[t._v("buk-Ipack")]),t._v(" "),r("option",{attrs:{value:"buk-Upack"}},[t._v("buk-Upack")]),t._v(" "),r("option",{attrs:{value:"超商貨到付款"}},[t._v("超商貨到付款")]),t._v(" "),r("option",{attrs:{value:"全球宅配"}},[t._v("全球宅配")])])]),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("paymethod"),expression:"errors.has('paymethod')"}],staticClass:"text-danger"},[t._v(t._s(t.$t("__carts_bill_info_Pickup_hint")))]),t._v(" "),r("br"),t._v(" "),r("button",{staticClass:"btn-comfirm btn-comfirm-bg",attrs:{type:"submit"}},[t._v("\n            "+t._s(t.$t("__carts_bill_info_checkout"))+"\n          ")])])]),t._v(" "),r("b-col",{staticClass:"cart-itemlist",attrs:{md:"4",cols:"12"}},[r("h2",{staticClass:"py-3 text-center cart-msg-title h4"},[t._v(t._s(t.$t("__carts_bill_items_list")))]),t._v(" "),t._l(t.cart_items.carts,function(e){return r("section",{key:e.id,staticClass:"cart-items"},[r("b-col",{attrs:{lg:"3",cols:"6"}},[t._t("item-img",[r("img",{staticClass:"img-fluid",attrs:{src:e.product.image,alt:e.product.title}})])],2),t._v(" "),r("b-col",{staticClass:"p-lg-0 px-3 d-flex-justify-align-all-center",attrs:{lg:"5",cols:"6"}},[r("section",{staticClass:"m-0 w-100 cart-items-info "},[r("span",{staticClass:"h5 mb-0 mr-1"},[t._v(t._s(e.product.title))]),r("br"),t._v(" "),r("span",[t._v(" NT$ "+t._s(e.product.price))])])])],1)}),t._v(" "),r("div",{staticClass:"px-2 d-flex justify-content-between"},[r("span",{staticClass:"h5"},[t._v(t._s(t.$t("__carts_freight")))]),t._v(" "),r("span",{staticClass:"h5"},[t._v("NT$ 100 ")])]),t._v(" "),r("div",{staticClass:"px-2 d-flex justify-content-between"},[r("span",{staticClass:"h5"},[t._v(t._s(t.$t("__carts_final_total")))]),t._v(" "),t.cart_items.total?r("span",{staticClass:"h5"},[t._v("NT$ "+t._s(t.cart_items.total+100))]):r("span",{staticClass:"h5"},[t._v("NT$ 100")])]),t._v(" "),t.cart_items.total>t.cart_items.final_total?r("div",{staticClass:"px-2 d-flex justify-content-between"},[r("span",{staticClass:"h5"},[t._v(t._s(t.$t("__carts_coupon_price")))]),t._v(" "),r("span",{staticClass:"h5"},[t._v("NT$ "+t._s(t._f("floorNum")(t.cart_items.final_total)))])]):t._e()],2)],1)],1)],1)},[],!1,null,"229ebdb9",null);e.default=component.exports}}]);